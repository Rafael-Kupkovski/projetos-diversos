<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h2>Local Storage Exemplo</h2>
    <br><br><br>
    <button onclick="getDados()">Mostrar informações do local storage</button>
    <div class="alunos">
    </div>

    <br><br>

    <input type="text" name="txtCep" id="txtCep" value="85660000">
    <button onclick="consultarCep()">Consultar CEP</button>

    <div class="dadosCep"></div>

    <script>
        var dados = {
            "alunos": [
                {"ra": 123, "nome": "João da Silva"},
                {"ra": 321, "nome": "Maria Oliveira"},
            ]
        }
        localStorage.setItem("dados", JSON.stringify(dados));

        function getDados() {
            var dadosLocal = localStorage.getItem("dados");
            dadosLocal = JSON.parse(dadosLocal);
            console.log(dadosLocal);

            var alunos = dadosLocal.alunos;
            var divAluno = document.querySelector(".alunos");
            divAluno.innerHTML = "";

            alunos.forEach(a => {
                divAluno.innerHTML += `<div><p>RA: ${a.ra} | Nome: ${a.nome}</p></div>`;
            });
        }

        function consultarCep() {
            var inputCep = document.getElementById("txtCep").value;
            var dadosCep = document.querySelector(".dadosCep");
            dadosCep.innerHTML = "";
            if(inputCep != ''){
                if(inputCep.length == 8){
                    fetch(`https://viacep.com.br/ws/${inputCep}/json/`)
                    .then(req => req.json())
                    .then(dados => {
                        dadosCep.innerHTML += `
                            <h2>${dados.localidade}</h2>
                            <h3>${dados.ibge}</h3>
                        `;
                    });
                }else{
                    alert("Campo incompleto");    
                }                
            }else{
                alert("Campo em branco");
            }
        }
    </script>
</body>
</html>